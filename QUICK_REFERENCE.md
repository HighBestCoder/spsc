# SPSC Queue å¿«é€Ÿå‚è€ƒ

## ğŸ“š æ–‡ä»¶è¯´æ˜

### æ ¸å¿ƒå®ç°
| æ–‡ä»¶ | è¯´æ˜ | ç‰¹ç‚¹ |
|------|------|------|
| `chan.h` | åŸå§‹SPSCé˜Ÿåˆ—å®ç° | åˆ†ç¦»å†…å­˜åˆ†é…ï¼Œæ•™å­¦å‚è€ƒ |
| `chan_soft_array.h` | æŸ”æ€§æ•°ç»„å®ç° | é«˜æ€§èƒ½ï¼Œå¯é…ç½®ç¼“å­˜è¡Œå¤§å° |

### æµ‹è¯•ç¨‹åº
| æ–‡ä»¶ | åŠŸèƒ½ | è¿è¡Œå‘½ä»¤ |
|------|------|----------|
| `main.cc` | åŸå§‹å®ç°æ€§èƒ½æµ‹è¯• | `make run` |
| `compare_performance.cc` | å¯¹æ¯”æµ‹è¯• | `make compare` |
| `memory_layout_test.cc` | å†…å­˜å¸ƒå±€åˆ†æ | `make memory` |
| `cacheline_performance_test.cc` | ç¼“å­˜è¡Œæ€§èƒ½æµ‹è¯• | `make cacheline` |
| `benchmark_cacheline.cc` | è¯¦ç»†åŸºå‡†æµ‹è¯• | `make benchmark` |
| `usage_examples.cc` | ä½¿ç”¨ç¤ºä¾‹ | `make examples` |

### å·¥å…·è„šæœ¬
| æ–‡ä»¶ | åŠŸèƒ½ | ä½¿ç”¨æ–¹æ³• |
|------|------|----------|
| `performance_report.sh` | æ€§èƒ½æŠ¥å‘Šç”Ÿæˆ | `make report` |
| `PERFORMANCE_SUMMARY.txt` | æ€§èƒ½æ€»ç»“æ–‡æ¡£ | æŸ¥çœ‹æ€§èƒ½åˆ†æç»“è®º |

## ğŸš€ å¿«é€Ÿå¼€å§‹

```bash
# 1. æ„å»ºæ‰€æœ‰ç¨‹åº
make all

# 2. è¿è¡Œæ‰€æœ‰æµ‹è¯•
make test-all

# 3. ç”Ÿæˆæ€§èƒ½æŠ¥å‘Š
make report

# 4. æŸ¥çœ‹å¸®åŠ©
make help
```

## ğŸ’» ä»£ç ä½¿ç”¨

### æ¨èé…ç½® (64å­—èŠ‚ç¼“å­˜è¡Œ)
```cpp
using Queue = SPSCQueueSoftArray<int, 1024, 64>;
auto* queue = Queue::create();
// ... ä½¿ç”¨é˜Ÿåˆ—
Queue::destroy(queue);
```

### é«˜æ€§èƒ½é…ç½® (128å­—èŠ‚ç¼“å­˜è¡Œ)
```cpp
using Queue = SPSCQueueSoftArray<int, 1024, 128>;
auto* queue = Queue::create();
```
// ... ä½¿ç”¨é˜Ÿåˆ—  
Queue::destroy(queue);
```

## ğŸ“Š æ€§èƒ½æ•°æ®

| é…ç½® | ååé‡ | é€‚ç”¨åœºæ™¯ |
|------|--------|----------|
| 128å­—èŠ‚ | ~170M ops/sec | æè‡´æ€§èƒ½è¦æ±‚ |
| 64å­—èŠ‚ | ~144M ops/sec | ç”Ÿäº§ç¯å¢ƒæ¨è |
| 32å­—èŠ‚ | ~109M ops/sec | ä¸æ¨è |
| 256å­—èŠ‚ | ~122M ops/sec | å†…å­˜æµªè´¹ |

## ğŸ¯ é€‰æ‹©æŒ‡å—

- **ç”Ÿäº§ç¯å¢ƒ**: ä½¿ç”¨64å­—èŠ‚ç¼“å­˜è¡Œ
- **æè‡´æ€§èƒ½**: ä½¿ç”¨128å­—èŠ‚ç¼“å­˜è¡Œ  
- **é¿å…ä½¿ç”¨**: 32å­—èŠ‚(false sharing)å’Œ256å­—èŠ‚(å†…å­˜æµªè´¹)

## ğŸ”§ æ„å»ºé€‰é¡¹

```bash
make all      # æ ‡å‡†æ„å»º
make debug    # è°ƒè¯•ç‰ˆæœ¬
make release  # æœ€å¤§ä¼˜åŒ–
make clean    # æ¸…ç†æ–‡ä»¶
```